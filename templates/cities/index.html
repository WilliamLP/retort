{% extends "layout.html" %}

{% block body %}

<div id="city">
    <form class="form-inline text-right" role="form">
        <div class="form-group">
            <label class="sr-only" for="exampleInputEmail2">Email address</label>
            <input type="text" class="form-control" id="city-filename" placeholder="Filename">
        </div>

        <button type="button" id="load-city" class="btn btn-default">Load</button>
        <button type="button" id="save-city" class="btn btn-default">Save</button>
    </form>
    <div id="city-header"></div>
    <div id="tile-grid"></div>

    <table class="table table-striped table-hover table-condensed">
        <thead>
            <th>Turn</th><th>Tiles</th></th><th>Pop</th><th>Food</th><th>Build</th><th>Hammers</th><th>Notes</th>
        </thead>
        <tbody id="city-turns"></tbody>
    </table>

</div>

<div id="tile-popup" class="modal" tabindex="-1">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">
            {% for cur_resource in ("Food", "Prod", "Commerce") %}
                <div class=""><small>{{ cur_resource }}</small></div>
                <div class="btn-group" data-toggle="buttons">
                    {% for i in range(0,9) %}
                    <label class="btn btn-primary btn-sm" name="{{ cur_resource }}" value="{{ i }}">
                        <input type="radio" name="{{ cur_resource }}" value="{{ i }}"> {{ i }}
                    </label>
                    {% endfor %}
                </div>
            {% endfor %}
            </div>
        </div>
    </div>
</div>

<div id="tile-select-popup" class="modal" tabindex="-1">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <div id="modal-tile-grid" class="modal-tile-grid"></div>
            </div>
        </div>
    </div>
</div>

<div id="build-select-popup" class="modal" tabindex="-1">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">
            </div>
        </div>
    </div>
</div>

<script type="text/template" id="city-header-template">
</script>

<script type="text/template" id="city-tile-template">
    <button type="button" class="btn btn-default btn-sm city-tile<% if (y==0) { %> tile-new-row<% } %><% if (!valid) { %> city-tile-hidden<% } %>"
            data-x="<%- x %>" data-y="<%- y %>">
        <%- f %>/<%- h %>/<%- c %>
    </button>
</script>

<script type="text/template" id="city-turn-template">
    <td><%- turn %></td>
    <td class="tile-select<% if (!validTiles) { %> danger<% } %>"><small><%- tilesWorked %></small></td>
    <td><%- pop %></td>
    <td><%- food %><%- (foodSurplus >= 0 ? '+':'-') + Math.abs(foodSurplus) %> / <%- foodToGrow %></td>
    <td class="build-select"><%- build.name %></td>
    <td><%- hammers %>+<%- hammersProduced %></td>
    <td><small><%- note %></small></td>
</script>

<script type="text/template" id="build-select-template">
<form role="form">
    <div class="form-group">
        <label>Select from Presets</label>
        <select class="form-control" name="build-preset">
            <option>(Select preset)</option>
            <% _.each(presets, function(preset) { %>
                <option><%- preset.name %></option>
            <% }); %>
        </select>
    </div>
    <div class="form-group">
        <label>Build</label>
        <input type="text" class="form-control" name="build-name" value="<%- build.name %>">
    </div>
    <div class="form-group">
        <label>Hammer Cost:</label>
        <input type="text" class="form-control" name="build-hammers" value="<%- build.hammers %>">
    </div>
    <div class="form-group">
        <label>Hammer Bonus</label>
        <input type="text" class="form-control" name="build-bonus" value="<%- build.bonus %>">
    </div>
</form>
</script>

{% endblock %}

{% block css %}
    <link href="/static/css/local/cities.css" rel="stylesheet">
{% endblock %}

{% block js %}
    <script src="/static/js/local/cities-models.js"></script>
    <script src="/static/js/local/cities-views.js"></script>
{% endblock %}